# ============================================
# 环境配置模板
# ============================================
# 
# ⚠️  设置说明：
# 1. 复制此文件: cp .env.example .env.local
# 2. 填入你的 Vault 凭证
# 3. 根据需要调整本地覆盖配置
# 4. 永远不要提交 .env.local 到 Git！
#
# ============================================

# ============================================
# Vault 配置（必需）
# ============================================
VAULT_ADDR=http://your-vault-server:8200
VAULT_ROLE_ID=your-role-id-here
VAULT_SECRET_ID=your-secret-id-here

# ============================================
# Vault 密钥路径（可选，使用默认路径）
# ============================================
# 注意：路径格式为 secret/data/xxx（KV v2 格式）
VAULT_DB_PATH=secret/data/database
VAULT_REDIS_PATH=secret/data/redis
VAULT_CLICKHOUSE_PATH=secret/data/clickhouse
VAULT_KAFKA_PATH=secret/data/kafka
VAULT_MINIO_PATH=secret/data/minio
VAULT_ES_PATH=secret/data/elasticsearch

# 监控服务（聚合配置）
VAULT_GRAFANA_PATH=secret/data/monitoring/grafana
VAULT_PROMETHEUS_PATH=secret/data/monitoring/prometheus
VAULT_ALERTMANAGER_PATH=secret/data/monitoring/alertmanager
VAULT_LOKI_PATH=secret/data/monitoring/loki
VAULT_JAEGER_PATH=secret/data/monitoring/jaeger

# 消息队列（聚合配置）
VAULT_RABBITMQ_PATH=secret/data/mq/rabbitmq

# 系统服务（聚合配置）
VAULT_SSH_PATH=secret/data/system/ssh
VAULT_COCKPIT_PATH=secret/data/system/cockpit

# ============================================
# 应用配置
# ============================================
APP_ENV=development
APP_NAME=cuba-erp

# ============================================
# Vault 快速初始化命令
# ============================================
# 1. 启用 KV v2 引擎：
#    vault secrets enable -path=secret kv-v2
#
# 2. 启用 AppRole 认证：
#    vault auth enable approle
#
# 3. 创建策略并获取凭证：
#    vault policy write cuba-services - <<EOF
#    path "secret/data/*" { capabilities = ["read", "list"] }
#    path "secret/metadata/*" { capabilities = ["list"] }
#    EOF
#    vault write auth/approle/role/cuba-services token_policies="cuba-services"
#    vault read auth/approle/role/cuba-services/role-id
#    vault write -f auth/approle/role/cuba-services/secret-id
#
# 4. 配置核心密钥：
#    vault kv put secret/database url="postgresql://..." password="..."
#    vault kv put secret/redis url="redis://..." password="..."
#    vault kv put secret/jwt secret="your-jwt-secret"
